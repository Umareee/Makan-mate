<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Menu - Makan Mate</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'makan-orange': '#FF5722',
                        'makan-orange-hover': '#E64A19',
                        'custom-topbar': '#474747',
                        'custom-navbar': '#F9F9F7',
                        'custom-logo-bg': '#F9F9F71F',
                        'custom-text': '#2C2F24',
                    },
                    fontFamily: {
                        'playfair': ['Playfair Display', 'serif'],
                        'dm-sans': ['DM Sans', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800&family=DM+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-white font-dm-sans text-custom-text">
    <!-- Header -->
    <header class="bg-gray-800 text-white">
        <!-- Top bar with contact info -->
        <div class="bg-custom-topbar py-2 px-2">
            <div class="container mx-auto px-2 sm:px-4 text-xs sm:text-sm">
                <!-- Mobile Layout -->
                <div class="flex sm:hidden justify-between items-start py-1">
                    <div class="flex items-center space-x-1">
                        <i class="fas fa-phone"></i>
                        <span>62642233 Ext 10-18</span>
                    </div>
                    <div class="flex flex-col items-end space-y-1">
                        <div class="flex items-center space-x-1">
                            <i class="fas fa-envelope"></i>
                            <span>order@makanmate.com</span>
                        </div>
                        <div class="flex space-x-2">
                            <a href="#" class="w-6 h-6 bg-custom-logo-bg rounded-full flex items-center justify-center hover:text-makan-orange transition-colors">
                                <i class="fab fa-twitter text-xs"></i>
                            </a>
                            <a href="#" class="w-6 h-6 bg-custom-logo-bg rounded-full flex items-center justify-center hover:text-makan-orange transition-colors">
                                <i class="fab fa-facebook text-xs"></i>
                            </a>
                            <a href="#" class="w-6 h-6 bg-custom-logo-bg rounded-full flex items-center justify-center hover:text-makan-orange transition-colors">
                                <i class="fab fa-instagram text-xs"></i>
                            </a>
                            <a href="#" class="w-6 h-6 bg-custom-logo-bg rounded-full flex items-center justify-center hover:text-makan-orange transition-colors">
                                <i class="fab fa-github text-xs"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <!-- Desktop Layout -->
                <div class="hidden sm:flex justify-between items-center">
                    <div class="flex items-center space-x-6">
                        <div class="flex items-center space-x-2">
                            <i class="fas fa-phone"></i>
                            <span>62642233 Ext 10-18</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <i class="fas fa-envelope"></i>
                            <span>order@makanmate.com</span>
                        </div>
                    </div>
                    <div class="flex space-x-3">
                        <a href="#" class="w-8 h-8 bg-custom-logo-bg rounded-full flex items-center justify-center hover:text-makan-orange transition-colors">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="w-8 h-8 bg-custom-logo-bg rounded-full flex items-center justify-center hover:text-makan-orange transition-colors">
                            <i class="fab fa-facebook"></i>
                        </a>
                        <a href="#" class="w-8 h-8 bg-custom-logo-bg rounded-full flex items-center justify-center hover:text-makan-orange transition-colors">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="w-8 h-8 bg-custom-logo-bg rounded-full flex items-center justify-center hover:text-makan-orange transition-colors">
                            <i class="fab fa-github"></i>
                        </a>
                    </div>
                </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main navigation -->
    <nav class="bg-custom-navbar text-custom-text py-4 px-2 shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-2 sm:px-4 flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <div class="w-12 h-12 bg-yellow-400 rounded-full flex items-center justify-center cursor-pointer" onclick="window.location.href='index.html'">
          <img src="/images/mate-logo.png" alt="Makan Mate Logo" class="w-10 h-10 rounded-full">
        </div>
        <div>
          <h1 class="text-xl sm:text-2xl font-bold text-makan-orange font-playfair cursor-pointer" onclick="window.location.href='index.html'">Makan Mate</h1>
        </div>
            </div>
            <!-- Navigation Links -->
            <div class="hidden lg:flex items-center space-x-4 xl:space-x-8">
                <a href="index.html" class="text-custom-text hover:text-makan-orange transition-colors font-medium">Home</a>
                <a href="about.html" class="text-custom-text hover:text-makan-orange transition-colors font-medium">About</a>
                <a href="menu.html" class="bg-makan-orange text-white px-4 py-2 rounded-full hover:bg-makan-orange-hover transition-colors">Menu</a>
                <a href="mealkits.html" class="text-custom-text hover:text-makan-orange transition-colors font-medium">Meal Kits</a>
                <a href="blog.html" class="text-custom-text hover:text-makan-orange transition-colors font-medium">Blog</a>
                <a href="#" class="text-custom-text hover:text-makan-orange transition-colors font-medium">Pages</a>
                <a href="contact.html" class="text-custom-text hover:text-makan-orange transition-colors font-medium">Contact</a>
                <a href="order.html" class="border-2 border-makan-orange text-makan-orange px-6 py-2 rounded-full hover:bg-makan-orange hover:text-white transition-colors font-medium">
                    Order Now
                </a>
            </div>

            <!-- Mobile menu button -->
            <div class="lg:hidden">
                <button class="text-custom-text hover:text-makan-orange">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Menu Hero Section -->
    <section class="relative  py-20">
        <div class="container mx-auto px-2 sm:px-4 md:px-8 lg:px-16 text-center">
            <h1 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-medium text-black font-playfair mb-6">Our Menu</h1>
            <p class="text-base sm:text-lg md:text-xl text-black/90 max-w-2xl mx-auto">
                We consider all the drivers of change gives you the components you need to change to create a truly happening.
            </p>
        </div>
    </section>

    <!-- Menu Section -->
    <section class="py-16 bg-gray-50">
        <div class="container mx-auto px-2 sm:px-4 md:px-8 lg:px-16">
            <!-- Menu Categories and Filter Button -->
            <div class="mb-8 sm:mb-12">
                <!-- Category Filters -->
                <div class="flex flex-wrap justify-center gap-2 sm:gap-4 mb-6" id="categories-container">
                    <!-- Categories will be loaded from JSON -->
                </div>
                
                <!-- Filter Toggle Button -->
                <div class="flex justify-end items-center gap-3 mb-4">
    <div id="active-filters-outside" class="hidden flex-wrap gap-2"></div>
    <!-- Filter toggle button stays unchanged -->
    <button id="filter-toggle-btn" class="inline-flex items-center gap-2 bg-white dark:bg-gray-800 border-2 border-makan-orange text-makan-orange dark:text-makan-orange px-6 py-3 rounded-full font-medium hover:bg-makan-orange hover:text-white transition-all duration-300">
        <i class="fas fa-filter"></i>
        <span>Filters</span>
        <i class="fas fa-chevron-down transition-transform duration-300" id="filter-chevron"></i>
    </button>
    <button id="clear-all-outside" class="hidden text-sm text-makan-orange underline hover:no-underline">
            Clear all
        </button>
</div>
                
                <!-- Collapsible Filter Panel -->
<div id="filter-panel" class="hidden bg-white border-2 border-gray-200 rounded-xl p-6 shadow-lg">
    <div class="mb-4">
        <h3 class="text-lg font-semibold text-custom-text mb-4 text-center">
            <i class="fas fa-sliders-h mr-2"></i>Filter By
        </h3>
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6">
        
        <!-- Allergens (Exclude) -->
        <div class="filter-group">
            <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-3">
                <i class="fas fa-ban text-makan-orange"></i>
                Allergens (Exclude)
            </label>
            <select id="allergens-filter" class="w-full p-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-makan-orange focus:border-transparent">
                <option value="all">All</option>
                <option value="dairy">Dairy</option>
                <option value="eggs">Eggs</option>
                <option value="gluten">Gluten</option>
                <option value="nuts">Nuts</option>
                <option value="seafood">Seafood</option>
                <option value="soy_legume">Soy/Legume</option>
                <option value="wheat">Wheat</option>
            </select>
        </div>

        <!-- Dietary Purposes -->
        <div class="filter-group">
            <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-3">
                <i class="fas fa-leaf text-makan-orange"></i>
                Dietary Purposes
            </label>
            <select id="dietary-purposes-filter" class="w-full p-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-makan-orange focus:border-transparent">
                <option value="all">All</option>
                <option value="buddhist">Buddhist Vegetarian</option>
                <option value="keto">Keto</option>
                <option value="vegan">Vegan</option>
                <option value="vegetarian">Vegetarian</option>
            </select>
        </div>

        <!-- Cuisines -->
        <div class="filter-group">
            <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-3">
                <i class="fas fa-utensils text-makan-orange"></i>
                Cuisines
            </label>
            <select id="cuisine-filter" class="w-full p-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-makan-orange focus:border-transparent">
                <option value="all">All</option>
                <option value="chinese">Chinese</option>
                <option value="indian">Indian</option>
                <option value="international">International</option>
                <option value="malay">Malay</option>
                <option value="nonya">Nonya</option>
                <option value="western">Western</option>
            </select>
        </div>

        <!-- Meal Times -->
        <div class="filter-group">
            <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-3">
                <i class="fas fa-clock text-makan-orange"></i>
                Meal Times
            </label>
            <select id="meal-time-filter" class="w-full p-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-makan-orange focus:border-transparent">
                <option value="all">All</option>
                <option value="breakfast">Breakfast</option>
                <option value="lunch">Lunch</option>
                <option value="dinner">Dinner</option>
                <option value="hightea">High Tea</option>
                <option value="snack">Snack</option>
            </select>
        </div>

        <!-- Cooking Methods -->
        <div class="filter-group">
            <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-3">
                <i class="fas fa-fire text-makan-orange"></i>
                Cooking Methods
            </label>
            <select id="cooking-method-filter" class="w-full p-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-makan-orange focus:border-transparent">
                <option value="all">All</option>
                <option value="baked">Baked</option>
                <option value="boiled">Boiled</option>
                <option value="braised">Braised</option>
                <option value="deepfried">Deep Fried</option>
                <option value="fried">Fried</option>
                <option value="grilled">Grilled</option>
                <option value="roasted">Roasted</option>
                <option value="sauteed">Sauteed</option>
                <option value="steamed">Steamed</option>
                <option value="stewed">Stewed</option>
            </select>
        </div>

        <!-- Flavor Profiles -->
        <div class="filter-group">
            <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-3">
                <i class="fas fa-pepper-hot text-makan-orange"></i>
                Flavor Profiles
            </label>
            <select id="flavor-filter" class="w-full p-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-makan-orange focus:border-transparent">
                <option value="all">All</option>
                <option value="bitter">Bitter</option>
                <option value="nonspicy">Non-Spicy</option>
                <option value="savory">Savory</option>
                <option value="sour">Sour</option>
                <option value="spicy">Spicy</option>
                <option value="sweet">Sweet</option>
                <option value="umami">Umami</option>
            </select>
        </div>

        <!-- Temperature -->
        <div class="filter-group">
            <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-3">
                <i class="fas fa-thermometer-half text-makan-orange"></i>
                Temperature
            </label>
            <select id="temperature-filter" class="w-full p-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-makan-orange focus:border-transparent">
                <option value="all">All</option>
                <option value="cold">Cold</option>
                <option value="warm">Warm</option>
            </select>
        </div>

        <!-- Food Restrictions -->
        <div class="filter-group">
            <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-3">
                <i class="fas fa-exclamation-circle text-makan-orange"></i>
                Food Restrictions
            </label>
            <select id="food-restriction-filter" class="w-full p-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-makan-orange focus:border-transparent">
                <option value="all">All</option>
                <option value="glutenfree">Gluten-Free</option>
                <option value="halal">Halal</option>
                <option value="kosher">Kosher</option>
                <option value="lactosefree">Lactose-Free</option>
                <option value="vegan">Vegan</option>
            </select>
        </div>

        <!-- Health -->
        <div class="filter-group">
            <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-3">
                <i class="fas fa-heartbeat text-makan-orange"></i>
                Health
            </label>
            <select id="health-filter" class="w-full p-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-makan-orange focus:border-transparent">
                <option value="all">All</option>
                <option value="lowercalorie">Lower Calorie</option>
                <option value="healthyoption">Healthy Option</option>
                <option value="lessoil">Less Oil</option>
                <option value="lesssalt">Less Salt</option>
                <option value="lesssweet">Less Sweet</option>
                <option value="morefiber">More Fiber</option>
            </select>
        </div>
    </div>

    <!-- Filter Action Buttons -->
    <div class="flex flex-col sm:flex-row justify-center gap-3 mt-6 pt-4 border-t border-gray-200">
        <button id="apply-filters" class="px-6 py-3 bg-makan-orange text-white rounded-lg font-medium hover:bg-makan-orange-hover transition-colors">
            <i class="fas fa-check mr-2"></i>Apply Filters
        </button>
        <button id="clear-filters" class="px-6 py-3 bg-gray-600 text-white rounded-lg font-medium hover:bg-gray-700 transition-colors">
            <i class="fas fa-times mr-2"></i>Clear All
        </button>
    </div>

    <!-- Active Filters Display -->
    <div id="active-filters" class="mt-4 hidden">
        <div class="text-sm text-gray-600 mb-2">Active filters:</div>
        <div id="active-filters-list" class="flex flex-wrap gap-2"></div>
    </div>
</div>

            </div>

            <!-- Menu Items Grid -->
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 max-w-7xl mx-auto" id="menu-grid">
                <!-- Menu items will be loaded from JSON -->
            </div>
        </div>
    </section>


    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12 sm:py-16">
        <div class="container mx-auto px-2 sm:px-4">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8">
                <!-- Logo and Description -->
                <div class="lg:col-span-1">
                    <div class="flex items-center space-x-3 mb-6">
                        <div class="w-12 h-12 bg-yellow-400 rounded-full flex items-center justify-center">
                            <img src="/images/mate-logo.png" alt="Makan Mate Logo" class="w-10 h-10 rounded-full">
                        </div>
                        <h3 class="text-xl sm:text-2xl font-bold text-white font-playfair">Makan Mate</h3>
                    </div>
                    <p class="text-gray-300 leading-relaxed mb-6">
                        In the new era of technology we look into the future with certainty and pride to for our company and.
                    </p>
                    <!-- Social Media Icons -->
                    <div class="flex space-x-4">
                        <a href="#" class="w-10 h-10 bg-makan-orange rounded-full flex items-center justify-center hover:bg-makan-orange-hover transition-colors">
                            <i class="fab fa-twitter text-white"></i>
                        </a>
                        <a href="#" class="w-10 h-10 bg-makan-orange rounded-full flex items-center justify-center hover:bg-makan-orange-hover transition-colors">
                            <i class="fab fa-facebook text-white"></i>
                        </a>
                        <a href="#" class="w-10 h-10 bg-makan-orange rounded-full flex items-center justify-center hover:bg-makan-orange-hover transition-colors">
                            <i class="fab fa-instagram text-white"></i>
                        </a>
                        <a href="#" class="w-10 h-10 bg-makan-orange rounded-full flex items-center justify-center hover:bg-makan-orange-hover transition-colors">
                            <i class="fab fa-github text-white"></i>
                        </a>
                    </div>
                </div>

                <!-- Pages Links -->
                <div class="mx-0 sm:mx-4">
                    <h4 class="text-lg font-bold text-white mb-6">Pages</h4>
                    <ul class="space-y-3">
                        <li><a href="index.html" class="text-gray-300 hover:text-makan-orange transition-colors">Home</a></li>
                        <li><a href="about.html" class="text-gray-300 hover:text-makan-orange transition-colors">About</a></li>
                        <li><a href="menu.html" class="text-gray-300 hover:text-makan-orange transition-colors">Menu</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-makan-orange transition-colors">Pricing</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-makan-orange transition-colors">Blog</a></li>
                        <li><a href="contact.html" class="text-gray-300 hover:text-makan-orange transition-colors">Contact</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-makan-orange transition-colors">Delivery</a></li>
                    </ul>
                </div>

                <!-- Utility Pages -->
                <div class="mx-0 sm:mx-4">
                    <h4 class="text-lg font-bold text-white mb-6">Utility Pages</h4>
                    <ul class="space-y-3">
                                <li><a href="menu.html" class="text-gray-300 hover:text-makan-orange transition-colors">Start Here</a></li>
                        <li><a href="menu.html" class="text-gray-300 hover:text-makan-orange transition-colors">Styleguide</a></li>
                        <li><a href="menu.html" class="text-gray-300 hover:text-makan-orange transition-colors">Password Protected</a></li>
                        <li><a href="menu.html" class="text-gray-300 hover:text-makan-orange transition-colors">404 Not Found</a></li>
                        <li><a href="menu.html" class="text-gray-300 hover:text-makan-orange transition-colors">Licenses</a></li>
                        <li><a href="menu.html" class="text-gray-300 hover:text-makan-orange transition-colors">Changelog</a></li>
                        <li><a href="menu.html" class="text-gray-300 hover:text-makan-orange transition-colors">View More</a></li>
                    </ul>
                </div>

                <!-- Follow Us On Instagram -->
                <div>
                    <h4 class="text-lg font-bold text-white mb-6">Follow Us On Instagram</h4>
                    <div class="grid grid-cols-2 gap-3">
                         <div class="aspect-square rounded-lg overflow-hidden">
                            <img src="/images/home/imgi_11_bento.jpg" alt="Instagram Food Post" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                        </div>
                        <div class="aspect-square rounded-lg overflow-hidden">
                            <img src="/images/home/imgi_12_classic-delight-2-366.jpg" alt="Instagram Food Post" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                        </div>
                        <div class="aspect-square rounded-lg overflow-hidden">
                            <img src="/images/home/imgi_14_healthier-choice-buffet.jpg" alt="Instagram Food Post" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                        </div>
                        <div class="aspect-square rounded-lg overflow-hidden">
                            <img src="/images/home/imgi_21_sauce.jpg" alt="Instagram Food Post" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Copyright -->
            <div class="border-t border-gray-700 mt-12 pt-8 text-center">
                <p class="text-gray-400">
                    Copyright Â© 2025 Makan Mate. All Rights Reserved
                </p>
            </div>
        </div>
    </footer>

    <!-- Mobile menu (hidden by default) -->
    <div class="lg:hidden fixed inset-0 bg-black bg-opacity-50 z-50 hidden" id="mobile-menu">
        <div class="bg-white w-64 h-full p-6">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-xl font-bold text-makan-orange">Menu</h2>
                <button class="text-gray-600" id="close-menu">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <nav class="space-y-4">
                <a href="index.html" class="block text-custom-text hover:text-makan-orange transition-colors py-2 border-b">Home</a>
                <a href="about.html" class="block text-custom-text hover:text-makan-orange transition-colors py-2 border-b">About</a>
                <a href="menu.html" class="block text-custom-text hover:text-makan-orange transition-colors py-2 border-b">Menu</a>
                <a href="mealkits.html" class="block text-custom-text hover:text-makan-orange transition-colors py-2 border-b">Meal Kits</a>
                <a href="blog.html" class="block text-custom-text hover:text-makan-orange transition-colors py-2 border-b">Blog</a>
                <a href="#" class="block text-custom-text hover:text-makan-orange transition-colors py-2 border-b">Pages</a>
                <a href="contact.html" class="block text-custom-text hover:text-makan-orange transition-colors py-2 border-b">Contact</a>
                <a href="order.html" class="block bg-makan-orange text-white px-4 py-2 rounded-full text-center mt-6">Order Now</a>
            </nav>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        // Mobile menu toggle
        const mobileMenuBtn = document.querySelector('.lg\\:hidden button');
        const mobileMenu = document.getElementById('mobile-menu');
        const closeMenuBtn = document.getElementById('close-menu');

        if (mobileMenuBtn && mobileMenu) {
            mobileMenuBtn.addEventListener('click', () => {
                mobileMenu.classList.remove('hidden');
            });
        }

        if (closeMenuBtn && mobileMenu) {
            closeMenuBtn.addEventListener('click', () => {
                mobileMenu.classList.add('hidden');
            });
        }

        // Close menu when clicking outside
        if (mobileMenu) {
            mobileMenu.addEventListener('click', (e) => {
                if (e.target === mobileMenu) {
                    mobileMenu.classList.add('hidden');
                }
            });
        }

        // Dynamic menu loading
        let menuData = null;

        // Initialize filter toggle and functionality
        function initializeFilters() {
            const filterToggleBtn = document.getElementById('filter-toggle-btn');
            const filterPanel = document.getElementById('filter-panel');
            const filterChevron = document.getElementById('filter-chevron');
            const applyBtn = document.getElementById('apply-filters');
            const clearBtn = document.getElementById('clear-filters');
            
            // Toggle filter panel
            if (filterToggleBtn && filterPanel) {
                filterToggleBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const isHidden = filterPanel.classList.contains('hidden');
                    
                    if (isHidden) {
                        filterPanel.classList.remove('hidden');
                        filterChevron.style.transform = 'rotate(180deg)';
                        filterToggleBtn.classList.add('bg-makan-orange', 'text-white');
                        filterToggleBtn.classList.remove('bg-white', 'dark:bg-gray-800', 'text-makan-orange', 'dark:text-makan-orange');
                    } else {
                        filterPanel.classList.add('hidden');
                        filterChevron.style.transform = 'rotate(0deg)';
                        filterToggleBtn.classList.remove('bg-makan-orange', 'text-white');
                        filterToggleBtn.classList.add('bg-white', 'dark:bg-gray-800', 'text-makan-orange', 'dark:text-makan-orange');
                    }
                });
                
                // Close filter panel when clicking outside
                document.addEventListener('click', (e) => {
                    if (!filterPanel.classList.contains('hidden') && 
                        !filterPanel.contains(e.target) && 
                        !filterToggleBtn.contains(e.target)) {
                        filterPanel.classList.add('hidden');
                        filterChevron.style.transform = 'rotate(0deg)';
                        filterToggleBtn.classList.remove('bg-makan-orange', 'text-white');
                        filterToggleBtn.classList.add('bg-white', 'dark:bg-gray-800', 'text-makan-orange', 'dark:text-makan-orange');
                    }
                });
                
                // Prevent closing when clicking inside the filter panel
                filterPanel.addEventListener('click', (e) => {
                    e.stopPropagation();
                });
            }
            
            // Apply filters button
            if (applyBtn) {
                applyBtn.addEventListener('click', () => {
                    applyAllFilters();
                    updateActiveFiltersDisplay();
                });
            }
            
            // Clear filters button
            if (clearBtn) {
                clearBtn.addEventListener('click', clearAllFilters);
            }
            
            // Auto-apply filters when selections change
            const filterIds = ['price-filter', 'source-filter', 'taste-filter', 'packs-filter', 'dietary-filter', 'spice-filter'];
            filterIds.forEach(filterId => {
                const filterElement = document.getElementById(filterId);
                if (filterElement) {
                    filterElement.addEventListener('change', () => {
                        applyAllFilters();
                        updateActiveFiltersDisplay();
                    });
                }
            });
        }

        // Apply all active filters
function applyAllFilters() {
    const filters = {
        allergens: document.getElementById('allergens-filter'),
        dietaryPurposes: document.getElementById('dietary-purposes-filter'),
        cuisine: document.getElementById('cuisine-filter'),
        mealTime: document.getElementById('meal-time-filter'),
        cookingMethod: document.getElementById('cooking-method-filter'),
        flavor: document.getElementById('flavor-filter'),
        temperature: document.getElementById('temperature-filter'),
        foodRestriction: document.getElementById('food-restriction-filter'),
        health: document.getElementById('health-filter')
    };

    // Build active list
    const active = [];
    Object.keys(filters).forEach(k => {
        const el = filters[k];
        if (el && el.value !== 'all') {
            active.push({ key: k, label: el.options[el.selectedIndex].text, value: el.value });
        }
    });

    // Apply filters
    const menuItems = document.querySelectorAll('.menu-item');
    let visibleCount = 0;
    menuItems.forEach(item => {
        const itemId = item.getAttribute('data-item-id');
        const itemData = menuData.items.find(i => i.id === itemId);
        if (!itemData) return;
        let show = true;
        active.forEach(f => {
            const dataKey = f.key.replace(/([A-Z])/g, '_$1').toLowerCase();
            const itemValue = Array.isArray(itemData[dataKey]) ? itemData[dataKey] : [itemData[dataKey]];
            if (!itemValue.includes(f.value)) show = false;
        });
        item.style.display = show ? 'block' : 'none';
        if (show) visibleCount++;
    });
    showFilterResults(visibleCount);

    // Close panel
    const panel = document.getElementById('filter-panel');
    const chevron = document.getElementById('filter-chevron');
    const toggleBtn = document.getElementById('filter-toggle-btn');
    panel.classList.add('hidden');
    chevron.style.transform = 'rotate(0deg)';
}



function clearFilter(filterId) {
    const filterElement = document.getElementById(filterId);
    if (filterElement) {
        filterElement.value = 'all';
        applyAllFilters(); 
        updateActiveFiltersDisplay();
    }
}

        // Update active filters display
function updateActiveFiltersDisplay() {
    const outsideBox = document.getElementById('active-filters-outside');
    if (!outsideBox) return;                     // safety-check

    const filterMetas = [
        { id: 'allergens-filter',          label: 'Allergens',      icon: 'fas fa-ban' },
        { id: 'dietary-purposes-filter',   label: 'Dietary',        icon: 'fas fa-leaf' },
        { id: 'cuisine-filter',            label: 'Cuisine',        icon: 'fas fa-utensils' },
        { id: 'meal-time-filter',          label: 'Meal Time',      icon: 'fas fa-clock' },
        { id: 'cooking-method-filter',     label: 'Cooking',        icon: 'fas fa-fire' },
        { id: 'flavor-filter',             label: 'Flavor',         icon: 'fas fa-pepper-hot' },
        { id: 'temperature-filter',        label: 'Temperature',    icon: 'fas fa-thermometer-half' },
        { id: 'food-restriction-filter',   label: 'Restriction',    icon: 'fas fa-exclamation-circle' },
        { id: 'health-filter',             label: 'Health',         icon: 'fas fa-heartbeat' }
    ];

    const active = [];
    filterMetas.forEach(f => {
        const el = document.getElementById(f.id);
        if (el && el.value !== 'all') {
            active.push({
                label: f.label,
                value: el.options[el.selectedIndex].text,
                icon: f.icon,
                filterId: f.id
            });
        }
    });

    if (active.length) {
        outsideBox.classList.remove('hidden');
        outsideBox.innerHTML = active.map(f => `
            <span class="inline-flex items-center gap-2 bg-makan-orange text-white px-3 py-1 rounded-full text-sm">
                <i class="${f.icon}"></i>
                ${f.label}: ${f.value}
                <button onclick="clearSingleFilter('${f.filterId}')" class="ml-1 hover:bg-white hover:bg-opacity-20 rounded-full p-1">
                    <i class="fas fa-times text-xs"></i>
                </button>
            </span>`).join('');
    } else {
        outsideBox.classList.add('hidden');
    }
    const clearAllBtn = document.getElementById('clear-all-outside');
if (clearAllBtn) {
    active.length ? clearAllBtn.classList.remove('hidden')
                  : clearAllBtn.classList.add('hidden');
}}

        // Clear single filter
        function clearSingleFilter(filterId) {
            const filterElement = document.getElementById(filterId);
            if (filterElement) {
                filterElement.value = 'all';
                applyAllFilters();
                updateActiveFiltersDisplay();
            }
        }

        // Clear all filters
       function clearAllFilters() {
    // 1. reset every <select>
    [
        'allergens-filter',
        'dietary-purposes-filter',
        'cuisine-filter',
        'meal-time-filter',
        'cooking-method-filter',
        'flavor-filter',
        'temperature-filter',
        'food-restriction-filter',
        'health-filter'
    ].forEach(id => {
        const el = document.getElementById(id);
        if (el) el.value = 'all';
    });

    // 2. show every card again
    document.querySelectorAll('.menu-item').forEach(card => card.style.display = 'block');

    // 3. wipe the badges and the extra "Clear all" button
    const outsideBox = document.getElementById('active-filters-outside');
    const clearAllBtn = document.getElementById('clear-all-outside');
    if (outsideBox) outsideBox.classList.add('hidden');
    if (clearAllBtn) clearAllBtn.classList.add('hidden');

    showFilterResults(menuData?.items?.length || 0);
}

        // Show filter results count
        function showFilterResults(count) {
            console.log(`Showing ${count} items`);
        }

        document.addEventListener('DOMContentLoaded', () => {
             document.getElementById('clear-all-outside')
            ?.addEventListener('click', clearAllFilters);
            loadMenuData().then(() => {
                initializeFilters();
            });
        });

        // Ensure loadMenuData returns a promise for proper chaining
        async function loadMenuData() {
            try {
                const response = await fetch('/menu-items.json');
                menuData = await response.json();
                generateCategories();
                generateMenuItems();
                initializeMenuInteraction();
            } catch (error) {
                console.error('Error loading menu data:', error);
            }
        }
        // Load menu data from JSON
        async function loadMenuData() {
            try {
                const response = await fetch('/menu-items.json');
                menuData = await response.json();
                generateCategories();
                generateMenuItems();
                initializeMenuInteraction();
            } catch (error) {
                console.error('Error loading menu data:', error);
            }
        }

        // Generate category buttons
        function generateCategories() {
            const categoriesContainer = document.getElementById('categories-container');
            categoriesContainer.innerHTML = '';

            menuData.categories.forEach(category => {
                const activeClass = category.active ? 'active bg-makan-orange text-white' : 'bg-white text-custom-text';
                const buttonHTML = `
                    <button class="menu-category-btn ${activeClass} px-4 sm:px-6 py-2 sm:py-3 rounded-full font-medium transition-all duration-300 hover:bg-makan-orange hover:text-white border border-gray-300 text-sm sm:text-base" data-category="${category.id}">
                        ${category.name}
                    </button>
                `;
                categoriesContainer.innerHTML += buttonHTML;
            });
        }

        // Generate menu items
        function generateMenuItems() {
            const menuGrid = document.getElementById('menu-grid');
            menuGrid.innerHTML = '';

            menuData.items.forEach(item => {
                const itemHTML = `
                    <div class="menu-item bg-white rounded-lg shadow-sm border border-gray-300 overflow-hidden cursor-pointer" data-category="${item.category}" data-item-id="${item.id}">
                        <div class="relative h-40 sm:h-48 md:h-52">
                            <img src="${item.image}" alt="${item.name}" class="w-full h-full object-cover">
                        </div>
                        <div class="p-3 sm:p-4 text-center">
                            <h3 class="text-base sm:text-lg font-bold text-custom-text mb-2">${item.name}</h3>
                            <div class="text-base sm:text-lg font-bold text-makan-orange mb-2">$${item.price}</div>
                            
                        </div>
                    </div>
                `;
                menuGrid.innerHTML += itemHTML;
            });
        }

        // Initialize menu interaction
        function initializeMenuInteraction() {
            const categoryBtns = document.querySelectorAll('.menu-category-btn');
            const menuGrid = document.getElementById('menu-grid');

            // Category filtering
            categoryBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const category = btn.getAttribute('data-category');
                    
                    // Update active button
                    categoryBtns.forEach(b => {
                        b.classList.remove('active', 'bg-makan-orange', 'text-white');
                        b.classList.add('bg-white', 'text-custom-text');
                    });
                    btn.classList.add('active', 'bg-makan-orange', 'text-white');
                    btn.classList.remove('bg-white', 'text-custom-text');
                    
                    // Filter menu items
                    const menuItems = document.querySelectorAll('.menu-item');
                    menuItems.forEach(item => {
                        // Remove any transition/transform to prevent visual shift
                        item.style.transition = 'none';
                        item.style.transform = 'none';
                        item.style.opacity = '1';
                        if (category === 'all' || item.getAttribute('data-category') === category) {
                            item.style.display = 'block';
                        } else {
                            item.style.display = 'none';
                        }
                    });
                });
            });

            // Menu item click handling
            menuGrid.addEventListener('click', (e) => {
                const menuItem = e.target.closest('.menu-item');
                if (!menuItem) return;

                const itemId = menuItem.getAttribute('data-item-id');
                const item = menuData.items.find(i => i.id === itemId);
                
                if (!item) {
                    Swal.fire({ icon: 'info', title: 'Coming soon', text: 'This item is not configured yet.' });
                    return;
                }

                const selected = { 
                    name: item.name, 
                    id: item.id, 
                    image: item.image, 
                    price: item.price,
                    description: item.description,
                    customizable: item.customizable,
                    data_source: item.data_source
                };
                localStorage.setItem('selectedMenuItem', JSON.stringify(selected));
                window.location.href = 'quantity-selection.html';
            });
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            loadMenuData();
        });
    </script>
</body>
</html>
