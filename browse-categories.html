<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Browse Categories - Makan Mate</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'makan-orange': '#FF6B35',
            'makan-orange-hover': '#E55A2B',
            'custom-text': '#2D3436',
            'custom-topbar': '#1A1A1A',
            'custom-navbar': '#F8F9FA'
          }
        }
      }
    }
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="font-sans bg-gray-50">

 <!-- Main navigation -->
    <nav class="bg-custom-navbar text-custom-text py-4 px-2 shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-2 sm:px-4 flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <div class="w-12 h-12 bg-yellow-400 rounded-full flex items-center justify-center cursor-pointer" onclick="window.location.href='index.html'">
          <img src="/images/mate-logo.png" alt="Makan Mate Logo" class="w-10 h-10 rounded-full">
        </div>
        <div>
          <h1 class="text-xl sm:text-2xl font-bold text-makan-orange font-playfair cursor-pointer" onclick="window.location.href='index.html'">Makan Mate</h1>
        </div>
            </div>
            <!-- Navigation Links -->
            <div class="hidden lg:flex items-center space-x-4 xl:space-x-8">
                <a href="index.html" class="bg-makan-orange text-white px-4 py-2 rounded-full hover:bg-makan-orange-hover transition-colors">Home</a>
                <a href="about.html" class="text-custom-text hover:text-makan-orange transition-colors font-medium">About</a>
                 <div class="group">
        <a href="menu.html" id="menu-trigger" class="text-custom-text hover:text-makan-orange transition-colors font-medium">Catering</a>

        <!-- Full-width mega panel -->
        <div class="absolute inset-x-0 top-full bg-white hidden group-hover:block border-t border-gray-200 shadow-sm z-50">
            <div class="px-4 lg:px-128">
                <div class="max-w-4xl mx-auto py-4">
                    <!-- Menu Grid -->
                    <div class="flex justify-center">
                        <div id="menu-grid" class="grid grid-cols-3 gap-4 max-w-4xl w-full">
                            <!-- 1. Seminar -->
                            <a href="javascript:void(0)" onclick="goToMenuCategory('seminar')"
                               class="menu-item block text-center p-3 hover:bg-gray-50 rounded">
                                <span class="text-sm text-custom-text hover:text-makan-orange">Seminar</span>
                            </a>
                            <!-- 2. Wedding -->
                            <a href="javascript:void(0)" onclick="goToMenuCategory('wedding')"
                               class="menu-item block text-center p-3 hover:bg-gray-50 rounded">
                                <span class="text-sm text-custom-text hover:text-makan-orange">Wedding</span>
                            </a>
                            <!-- 3. Festive Special -->
                            <a href="javascript:void(0)" onclick="goToMenuCategory('festive')"
                               class="menu-item block text-center p-3 hover:bg-gray-50 rounded">
                                <span class="text-sm text-custom-text hover:text-makan-orange">Festive Special</span>
                            </a>
                            <!-- 4. Vegan/Healthy -->
                            <a href="javascript:void(0)" onclick="goToMenuCategory('vegan')"
                               class="menu-item block text-center p-3 hover:bg-gray-50 rounded">
                                <span class="text-sm text-custom-text hover:text-makan-orange">Vegan/Healthy</span>
                            </a>
                            <!-- 5. Mini-Buffet -->
                            <a href="javascript:void(0)" onclick="goToMenuCategory('mini-buffet')"
                               class="menu-item block text-center p-3 hover:bg-gray-50 rounded">
                                <span class="text-sm text-custom-text hover:text-makan-orange">Mini-Buffet</span>
                            </a>
                            <!-- 6. Buffet -->
                            <a href="javascript:void(0)" onclick="goToMenuCategory('buffet')"
                               class="menu-item block text-center p-3 hover:bg-gray-50 rounded">
                                <span class="text-sm text-custom-text hover:text-makan-orange">Buffet</span>
                            </a>
                            <!-- 7. Bento Set -->
                            <a href="javascript:void(0)" onclick="goToMenuCategory('bento')"
                               class="menu-item block text-center p-3 hover:bg-gray-50 rounded">
                                <span class="text-sm text-custom-text hover:text-makan-orange">Bento Set</span>
                            </a>
                            <!-- 8. Plated Meal -->
                            <a href="javascript:void(0)" onclick="goToMenuCategory('plated')"
                               class="menu-item block text-center p-3 hover:bg-gray-50 rounded">
                                <span class="text-sm text-custom-text hover:text-makan-orange">Plated Meal</span>
                            </a>
                            <!-- 9. Live Station -->
                            <a href="javascript:void(0)" onclick="goToMenuCategory('live-station')"
                               class="menu-item block text-center p-3 hover:bg-gray-50 rounded">
                                <span class="text-sm text-custom-text hover:text-makan-orange">Live Station</span>
                            </a>
                        </div>
                    </div>
                    <!-- CTA Button -->
                    <div class="text-center py-6">
                        <a href="menu.html" class="inline-block bg-makan-orange text-white px-6 py-3 rounded-full font-medium hover:bg-makan-orange-hover transition">See All Menu</a>
                    </div>
                </div>
            </div>
        </div>


 

      </div>
                <a href="mealkits.html" class="text-custom-text hover:text-makan-orange transition-colors font-medium">Delivery</a>
                <a href="weekly-meal-plan.html" class="text-custom-text hover:text-makan-orange transition-colors font-medium">Plans</a>
                <a href="#" class="text-custom-text hover:text-makan-orange transition-colors font-medium">Mart</a>
                <a href="past-events.html" class="text-custom-text hover:text-makan-orange transition-colors font-medium">Gallery</a>
                <a href="contact.html" class="text-custom-text hover:text-makan-orange transition-colors font-medium">Contact</a>
            </div>

            <!-- Mobile menu button -->
            <div class="lg:hidden">
                <button class="text-custom-text hover:text-makan-orange">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
        </div>
    </nav>

  <!-- Main Content -->
  <main class="container mx-auto px-4 py-8">
    <!-- Header -->
    <div class="text-center mb-8">
      <nav class="text-sm text-gray-600 mb-4">
        <a href="index.html" class="hover:text-makan-orange">Home</a>
        <span class="mx-2">/</span>
        <span id="category-breadcrumb">Browse Categories</span>
      </nav>
      <h1 id="page-title" class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">
        Browse Categories
      </h1>
      <p class="text-gray-600">Find the perfect catering option for your needs</p>
    </div>

    <!-- Categories Grid -->
    <div id="categories-container" class="max-w-6xl mx-auto">
      <!-- This will be populated by JavaScript -->
    </div>

    <!-- Back Button -->
    <div id="back-button-container" class="text-center mt-8 hidden">
      <button id="back-button" class="bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg transition-colors">
        <i class="fas fa-arrow-left mr-2"></i>
        Back to Menu
      </button>
    </div>
  </main>

 <!-- Footer -->
    <footer class="bg-gray-800 text-white py-16 observe-fade  ">
        <div class="container mx-auto px-2 sm:px-4 md:px-8 lg:px-16">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8">
                <!-- Logo and Description -->
                <div class="lg:col-span-1">
                    <div class="flex items-center space-x-3 mb-6">
                        <div class="w-12 h-12 bg-yellow-400 rounded-full flex items-center justify-center">
                            <img src="/images/mate-logo.png" alt="Makan Mate Logo" class="w-10 h-10 rounded-full">
                        </div>
                        <h3 class="text-xl sm:text-2xl font-bold text-white font-playfair">Makan Mate</h3>
                    </div>
                    <p class="text-gray-300 leading-relaxed mb-6">
                        In the new era of technology we look into the future with certainty and pride to for our company and.
                    </p>
                    <!-- Social Media Icons -->
                    <div class="flex space-x-4">
                        <a href="#" class="w-10 h-10 bg-makan-orange rounded-full flex items-center justify-center hover:bg-makan-orange-hover transition-colors">
                            <i class="fab fa-twitter text-white"></i>
                        </a>
                        <a href="#" class="w-10 h-10 bg-makan-orange rounded-full flex items-center justify-center hover:bg-makan-orange-hover transition-colors">
                            <i class="fab fa-facebook text-white"></i>
                        </a>
                        <a href="#" class="w-10 h-10 bg-makan-orange rounded-full flex items-center justify-center hover:bg-makan-orange-hover transition-colors">
                            <i class="fab fa-instagram text-white"></i>
                        </a>
                        <a href="#" class="w-10 h-10 bg-makan-orange rounded-full flex items-center justify-center hover:bg-makan-orange-hover transition-colors">
                            <i class="fab fa-github text-white"></i>
                        </a>
                    </div>
                </div>

                <!-- Pages Links -->
                <div class="mx-0 sm:mx-4">
                    <h4 class="text-lg font-bold text-white mb-6">Pages</h4>
                    <ul class="space-y-3">
                        <li><a href="#" class="text-gray-300 hover:text-makan-orange transition-colors">Home</a></li>
                        <li><a href="about.html" class="text-gray-300 hover:text-makan-orange transition-colors">About</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-makan-orange transition-colors">Catering</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-makan-orange transition-colors">Pricing</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-makan-orange transition-colors">Blog</a></li>
                        <li><a href="contact.html" class="text-gray-300 hover:text-makan-orange transition-colors">Contact</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-makan-orange transition-colors">Delivery</a></li>
                    </ul>
                </div>

                <!-- Utility Pages -->
                <div class="mx-0 sm:mx-4">
                    <h4 class="text-lg font-bold text-white mb-6">Utility Pages</h4>
                    <ul class="space-y-3">
                              <li><a href="menu.html" class="text-gray-300 hover:text-makan-orange transition-colors">Start Here</a></li>
                        <li><a href="menu.html" class="text-gray-300 hover:text-makan-orange transition-colors">Styleguide</a></li>
                        <li><a href="menu.html" class="text-gray-300 hover:text-makan-orange transition-colors">Password Protected</a></li>
                        <li><a href="menu.html" class="text-gray-300 hover:text-makan-orange transition-colors">404 Not Found</a></li>
                        <li><a href="menu.html" class="text-gray-300 hover:text-makan-orange transition-colors">Licenses</a></li>
                        <li><a href="menu.html" class="text-gray-300 hover:text-makan-orange transition-colors">Changelog</a></li>
                        <li><a href="menu.html" class="text-gray-300 hover:text-makan-orange transition-colors">View More</a></li>
                    </ul>
                </div>

                <!-- Follow Us On Instagram -->
                <div>
                    <h4 class="text-lg font-bold text-white mb-6">Follow Us On Instagram</h4>
                    <div class="grid grid-cols-2 gap-3">
                        <div class="aspect-square rounded-lg overflow-hidden">
                            <img src="/images/home/imgi_11_bento.jpg" alt="Instagram Food Post" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                        </div>
                        <div class="aspect-square rounded-lg overflow-hidden">
                            <img src="/images/home/imgi_12_classic-delight-2-366.jpg" alt="Instagram Food Post" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                        </div>
                        <div class="aspect-square rounded-lg overflow-hidden">
                            <img src="/images/home/imgi_14_healthier-choice-buffet.jpg" alt="Instagram Food Post" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                        </div>
                        <div class="aspect-square rounded-lg overflow-hidden">
                            <img src="/images/home/imgi_21_sauce.jpg" alt="Instagram Food Post" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">
                        </div>
                    </div>
                </div>

         
            </div>

            <!-- Copyright -->
            <div class="border-t border-gray-700 mt-12 pt-8 text-center">
                <p class="text-gray-400">
                    Copyright © 2025 Makan Mate. All Rights Reserved
                </p>
            </div>
        </div>
    </footer>

    <!-- Mobile menu (hidden by default) -->
    <div class="lg:hidden fixed inset-0 bg-black bg-opacity-50 z-50 hidden" id="mobile-menu">
        <div class="bg-white w-64 h-full p-6">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-xl font-bold text-makan-orange">Menu</h2>
                <button class="text-gray-600" id="close-menu">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <nav class="space-y-4">
                <a href="index.html" class="block text-custom-text hover:text-makan-orange transition-colors py-2 border-b">Home</a>
                <a href="about.html" class="block text-custom-text hover:text-makan-orange transition-colors py-2 border-b">About</a>
                <a href="menu.html" class="block text-custom-text hover:text-makan-orange transition-colors py-2 border-b">Catering</a>
                <a href="mealkits.html" class="block text-custom-text hover:text-makan-orange transition-colors py-2 border-b">Meal Kits</a>
                <a href="blog.html" class="block text-custom-text hover:text-makan-orange transition-colors py-2 border-b">Blog</a>
                <a href="past-events.html" class="block text-custom-text hover:text-makan-orange transition-colors py-2 border-b">Past Events</a>
                <a href="#" class="block text-custom-text hover:text-makan-orange transition-colors py-2 border-b">Pages</a>
                <a href="contact.html" class="block text-custom-text hover:text-makan-orange transition-colors py-2 border-b">Contact</a>
                <a href="order.html" class="block bg-makan-orange text-white px-4 py-2 rounded-full text-center mt-6">Order Now</a>
            </nav>
        </div>
    </div>

  <script>
    let categoriesData = null;
    let currentCategory = null;
    let currentSubcategory = null;

    // Load categories data
    async function loadCategoriesData() {
      try {
        const response = await fetch('/categories.json');
        categoriesData = await response.json();
        return categoriesData;
      } catch (error) {
        console.error('Error loading categories data:', error);
        return null;
      }
    }

    // Get URL parameters
    function getURLParameter(name) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(name);
    }

    // Display main categories or all subcategories
    function displayMainCategories() {
      const container = document.getElementById('categories-container');
      
      // Check if we should show all subcategories
      const showAll = !getURLParameter('category');
      
      if (showAll && categoriesData) {
        // Show all subcategories from all categories
        const allSubcategories = [];
        
        // Collect all subcategories from all categories
        Object.keys(categoriesData.all).forEach(categoryKey => {
          const data = categoriesData.all[categoryKey];
          
          if (Array.isArray(data)) {
            // Simple array of subcategories
            data.forEach(item => {
              allSubcategories.push({
                name: item,
                parentCategory: categoryKey
              });
            });
          } else {
            // Object with nested subcategories
            Object.keys(data).forEach(subKey => {
              allSubcategories.push({
                name: subKey,
                parentCategory: categoryKey,
                hasSubcategories: Array.isArray(data[subKey]) && data[subKey].length > 0,
                subcategories: data[subKey]
              });
            });
          }
        });

        // Display all subcategories as cards
        container.innerHTML = `
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 items-start">
            ${allSubcategories.map(item => `
              ${item.hasSubcategories ? `
                <div class="subcategory-card bg-white rounded-2xl shadow-md hover:shadow-lg overflow-hidden hover:-translate-y-1 transition-all duration-300 border border-gray-200 hover:border-makan-orange/40">
                  <div class="subcategory-header p-6 border-b border-gray-200 bg-gray-50 hover:bg-makan-orange/10 transition-all duration-300 cursor-pointer" onclick="handleCategoryClick('${item.name}')">
                    <h4 class="text-lg font-semibold text-gray-800 hover:text-makan-orange text-center leading-tight transition-colors duration-300">${item.name}</h4>
                  </div>
                  <div class="subcategory-content bg-white">
                    <div class="p-4 space-y-2">
                      ${item.subcategories.map(subItem => `
                        <div class="sub-item bg-gray-50 rounded-lg p-3 cursor-pointer hover:bg-makan-orange/20 transition-all duration-200 text-center border border-gray-100" onclick="handleSubItemClick('${subItem}')">
                          <span class="text-sm font-medium text-gray-700">${subItem}</span>
                        </div>
                      `).join('')}
                    </div>
                  </div>
                </div>
              ` : `
                <div class="subcategory-card bg-white rounded-2xl shadow-md hover:shadow-lg p-6 cursor-pointer hover:-translate-y-1 transition-all duration-300 border border-gray-200 hover:border-makan-orange/40" onclick="handleCategoryClick('${item.name}')">
                  <div class="text-center">
                    <h4 class="text-lg font-semibold text-gray-800 hover:text-makan-orange transition-colors leading-tight">${item.name}</h4>
                  </div>
                </div>
              `}
            `).join('')}
          </div>
        `;
      } else {
        // Show main categories for navigation
        const categories = [
          { key: 'service_style', name: 'Service Style' },
          { key: 'event_type', name: 'Event Type' },
          { key: 'cuisine', name: 'Cuisine' },
          { key: 'festive', name: 'Festive' },
          { key: 'budget_per_pax', name: 'Budget Per Pax' },
          { key: 'pax_range', name: 'Pax Range' },
          { key: 'meal_period', name: 'Meal Period' }
        ];

        container.innerHTML = `
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 items-start">
            ${categories.map(category => `
              <div class="category-card bg-gradient-to-br from-makan-orange to-makan-orange-hover rounded-2xl shadow-lg hover:shadow-2xl p-8 cursor-pointer hover:-translate-y-2 transition-all duration-300 group border-2 border-makan-orange/20 relative overflow-hidden" 
                   onclick="showSubcategories('${category.key}', '${category.name}')">
                <div class="absolute inset-0 bg-gradient-to-br from-white/10 via-transparent to-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                <div class="relative text-center">
                  <h3 class="text-xl font-bold text-white leading-tight mb-2">
                    ${category.name}
                  </h3>
                  <div class="w-16 h-0.5 bg-white/50 mx-auto"></div>
                </div>
              </div>
            `).join('')}
          </div>
        `;
      }
    }

    // Display subcategories
    function showSubcategories(categoryKey, categoryName) {
      if (!categoriesData || !categoriesData.all[categoryKey]) return;
      
      currentCategory = categoryKey;
      const data = categoriesData.all[categoryKey];
      
      // Update page title and breadcrumb
      document.getElementById('page-title').textContent = categoryName;
      document.getElementById('category-breadcrumb').innerHTML = `
        <a href="browse-categories.html" class="hover:text-makan-orange">Browse Categories</a>
        <span class="mx-2">/</span>
        <span>${categoryName}</span>
      `;
      
      const container = document.getElementById('categories-container');
      
      // Use consistent card design for all categories
      if (Array.isArray(data)) {
        // Simple array of subcategories - display as cards
        container.innerHTML = `
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 items-start">
            ${data.map(item => `
              <div class="subcategory-card bg-white rounded-2xl shadow-md hover:shadow-lg p-6 cursor-pointer hover:-translate-y-1 transition-all duration-300 border border-gray-200 hover:border-makan-orange/40" onclick="handleCategoryClick('${item}')">
                <div class="text-center">
                  <h4 class="text-lg font-semibold text-gray-800 hover:text-makan-orange transition-colors leading-tight">
                    ${item}
                  </h4>
                </div>
              </div>
            `).join('')}
          </div>
        `;
      } else {
        // Object with nested subcategories - display as cards with proper sizing
        const keys = Object.keys(data);
        container.innerHTML = `
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 items-start">
            ${keys.map(key => `
              ${Array.isArray(data[key]) && data[key].length > 0 ? `
                <div class="subcategory-card bg-white rounded-2xl shadow-md hover:shadow-lg overflow-hidden hover:-translate-y-1 transition-all duration-300 border border-gray-200 hover:border-makan-orange/40">
                  <div class="subcategory-header p-6 border-b border-gray-200 bg-gray-50 hover:bg-makan-orange/10 transition-all duration-300 cursor-pointer" onclick="handleCategoryClick('${key}')">
                    <h4 class="text-lg font-semibold text-gray-800 hover:text-makan-orange text-center leading-tight transition-colors duration-300">${key}</h4>
                  </div>
                  <div class="subcategory-content bg-white">
                    <div class="p-4 space-y-2">
                      ${data[key].map(item => `
                        <div class="sub-item bg-gray-50 rounded-lg p-3 cursor-pointer hover:bg-makan-orange/20 transition-all duration-200 text-center border border-gray-100" onclick="handleSubItemClick('${item}')">
                          <span class="text-sm font-medium text-gray-700">${item}</span>
                        </div>
                      `).join('')}
                    </div>
                  </div>
                </div>
              ` : `
                <div class="subcategory-card bg-white rounded-2xl shadow-md hover:shadow-lg p-6 cursor-pointer hover:-translate-y-1 transition-all duration-300 border border-gray-200 hover:border-makan-orange/40" onclick="handleCategoryClick('${key}')">
                  <div class="text-center">
                    <h4 class="text-lg font-semibold text-gray-800 hover:text-makan-orange transition-colors leading-tight">${key}</h4>
                  </div>
                </div>
              `}
            `).join('')}
          </div>
        `;
      }
      
      // Show back button
      document.getElementById('back-button-container').classList.remove('hidden');
    }


    // Mapping of category/subcategory names to menu filter values
    // Based on actual properties in menu-items.json
    const categoryToMenuFilter = {
      // Service Style mappings - using category buttons (like menu dropdown)
      'Bento Set': 'bento',
      'Standard': 'bento', // Subcategory under Bento Set
      'Premium': 'bento', // Subcategory under Bento Set
      'Special Set': 'buffet',
      'Steamboat': 'buffet', // Subcategory under Special Set
      'BBQ': 'buffet', // Subcategory under Special Set
      'Live Station': 'live-station',
      'Sweet': 'live-station', // Subcategory under Live Station
      'Savory': 'live-station', // Subcategory under Live Station
      'Mini-Buffet': 'mini-buffet',
      'Buffet': 'buffet',
      'Plated Meal': 'plated',
      
      // Event Type mappings - using category buttons
      'Birthday': 'mini-buffet', // Main category maps to mini-buffet by default
      'Wedding': 'wedding',
      'Seminar Package': 'seminar',
      'Parent Day Special': 'seminar',
      'Funeral Buffet': 'buffet',
      'Festive Special': 'festive',
      
      // Cuisine mappings - based on actual cuisine values in menu-items.json
      'Chinese': { filterType: 'cuisine', value: 'chinese' },
      'Western': { filterType: 'cuisine', value: 'western' },
      'Japanese': { filterType: 'cuisine', value: 'japanese' }, // Actually exists in data
      'Korean': { filterType: 'cuisine', value: 'korean' }, // Actually exists in data
      'Thai': { filterType: 'cuisine', value: 'thai' },
      'Indian': { filterType: 'cuisine', value: 'indian' },
      'Malay': { filterType: 'cuisine', value: 'malay' },
      'International': { filterType: 'cuisine', value: 'international' },
      'Nonya': { filterType: 'cuisine', value: 'nonya' },
      'Asian': { filterType: 'cuisine', value: 'international' }, // Map to international
      'Vegetarian': { filterType: 'dietary', value: 'vegetarian' },
      'Healthy': { filterType: 'health', value: 'healthyoption' },
      
      // Festive mappings - based on categories.json
      'Chinese New Year (CNY)': 'festive',
      'Hari Raya': 'festive',
      'Deepavali': 'festive',
      'Mid-Autumn': 'festive',
      'Christmas': 'festive',
      
      // Budget Per Pax mappings - based on categories.json
      '<$10': { filterType: 'health', value: 'lowercalorie' },
      '$11–$20': { filterType: 'dietary', value: 'halal' },
      '$21–$30': { filterType: 'health', value: 'healthyoption' },
      '$31–$40': { filterType: 'health', value: 'healthyoption' },
      '$41–$50': { filterType: 'health', value: 'healthyoption' },
      '>$50': { filterType: 'health', value: 'healthyoption' },
      
      // Pax Range mappings - based on categories.json
      '10–24': 'mini-buffet', // Small groups typically use mini-buffet
      '25–40': 'buffet', // Medium groups use buffet
      '41+': 'buffet', // Large groups use buffet
      
      // Meal Period mappings - based on actual meal_time values in menu-items.json
      'Breakfast': { filterType: 'mealTime', value: 'breakfast' },
      'Lunch': { filterType: 'mealTime', value: 'lunch' },
      'Dinner': { filterType: 'mealTime', value: 'dinner' },
      'High Tea': { filterType: 'mealTime', value: 'hightea' }, // Found in menu-items.json
      'Snack': { filterType: 'mealTime', value: 'snack' }, // Found in menu-items.json
      
      // Mini-Buffet in meal time context should use meal time filter
      'Mini-Buffet': { filterType: 'mealTime', value: 'hightea' },
      
      // Additional mappings based on actual values in menu-items.json
      'Halal': { filterType: 'foodRestriction', value: 'halal' }, // Found in data
      'Vegetarian': { filterType: 'dietary', value: 'vegetarian' }, // Found in data
      'Vegan': { filterType: 'dietary', value: 'vegan' },
      'Gluten-Free': { filterType: 'foodRestriction', value: 'glutenfree' },
      'Spicy': { filterType: 'flavor', value: 'spicy' }, // Found in data
      'Non-Spicy': { filterType: 'flavor', value: 'nonspicy' },
      'Sweet': { filterType: 'flavor', value: 'sweet' }, // Found in data
      'Savory': { filterType: 'flavor', value: 'savory' }, // Found in data
      
      // Cooking methods found in data
      'Grilled': { filterType: 'cookingMethod', value: 'grilled' },
      'Steamed': { filterType: 'cookingMethod', value: 'steamed' },
      'Fried': { filterType: 'cookingMethod', value: 'fried' },
      'Baked': { filterType: 'cookingMethod', value: 'baked' },
      'Roasted': { filterType: 'cookingMethod', value: 'roasted' },
      'Stewed': { filterType: 'cookingMethod', value: 'stewed' },
      'Braised': { filterType: 'cookingMethod', value: 'braised' },
      'Sauteed': { filterType: 'cookingMethod', value: 'sauteed' },
      
      // Health options found in data
      'Healthy Option': { filterType: 'health', value: 'healthyoption' },
      'Less Oil': { filterType: 'health', value: 'lessoil' },
      'Less Salt': { filterType: 'health', value: 'lesssalt' },
      'Less Sweet': { filterType: 'health', value: 'lesssweet' },
      'More Fiber': { filterType: 'health', value: 'morefiber' }
    };

    // Handle category header clicks
    function handleCategoryClick(categoryName) {
      console.log('Category clicked:', categoryName);
      navigateToMenuWithFilter(categoryName);
    }

    // Handle sub-item clicks
    function handleSubItemClick(subItemName) {
      console.log('Sub-item clicked:', subItemName);
      navigateToMenuWithFilter(subItemName);
    }

    // Navigate to menu.html with appropriate filter
    function navigateToMenuWithFilter(itemName) {
      const filterMapping = categoryToMenuFilter[itemName];
      
      if (typeof filterMapping === 'string') {
        // Direct category filter
        window.location.href = `menu.html?filter=${filterMapping}`;
      } else if (typeof filterMapping === 'object') {
        // Dropdown filter - navigate to menu and set filter via URL parameters
        const params = new URLSearchParams();
        params.set(filterMapping.filterType, filterMapping.value);
        window.location.href = `menu.html?${params.toString()}`;
      } else {
        // No specific mapping found, go to menu without filter
        console.log(`No filter mapping found for: ${itemName}`);
        window.location.href = 'menu.html';
      }
    }

    // Back button functionality
    document.getElementById('back-button').addEventListener('click', () => {
      // Navigate back to home page
      window.location.href = 'menu.html';
    });

    // Initialize page
    document.addEventListener('DOMContentLoaded', async () => {
      await loadCategoriesData();
      
      // Check if a specific category was requested
      const categoryParam = getURLParameter('category');
      
      if (categoryParam && categoriesData) {
        const categoryMap = {
          'service_style': 'Service Style',
          'event_type': 'Event Type', 
          'cuisine': 'Cuisine',
          'festive': 'Festive',
          'budget_per_pax': 'Budget Per Pax',
          'pax_range': 'Pax Range',
          'meal_period': 'Meal Period'
        };
        
        if (categoryMap[categoryParam]) {
          showSubcategories(categoryParam, categoryMap[categoryParam]);
        } else {
          displayMainCategories();
        }
      } else {
        displayMainCategories();
      }
    });
        // Mobile menu toggle
        const mobileMenuBtn = document.querySelector('.lg\\:hidden button');
        const mobileMenu = document.getElementById('mobile-menu');
        const closeMenuBtn = document.getElementById('close-menu');

        if (mobileMenuBtn && mobileMenu) {
            mobileMenuBtn.addEventListener('click', () => {
                mobileMenu.classList.remove('hidden');
            });
        }

        if (closeMenuBtn && mobileMenu) {
            closeMenuBtn.addEventListener('click', () => {
                mobileMenu.classList.add('hidden');
            });
        }

        // Close menu when clicking outside
        if (mobileMenu) {
            mobileMenu.addEventListener('click', (e) => {
                if (e.target === mobileMenu) {
                    mobileMenu.classList.add('hidden');
                }
            });
        }

        // Function to navigate to menu page with selected category
        function goToMenuCategory(categoryId) {
            console.log('Storing category for navigation:', categoryId);
            localStorage.setItem('selectedMenuCategory', categoryId);
            window.location.href = 'menu.html';
        }

          // Hover menu with delay
const menuTrigger = document.getElementById('menu-trigger');
const menuPanel = document.querySelector('.group .absolute');

if (menuTrigger && menuPanel) {
    let menuTimeout;
    
    menuTrigger.addEventListener('mouseenter', () => {
        clearTimeout(menuTimeout);
        menuPanel.classList.remove('hidden');
    });
    
    menuTrigger.addEventListener('mouseleave', () => {
        menuTimeout = setTimeout(() => {
            menuPanel.classList.add('hidden');
        }, 1000); // 1 second delay
    });
    
    menuPanel.addEventListener('mouseenter', () => {
        clearTimeout(menuTimeout);
        menuPanel.classList.remove('hidden');
    });
    
    menuPanel.addEventListener('mouseleave', () => {
        menuTimeout = setTimeout(() => {
            menuPanel.classList.add('hidden');
        }, 200); 
    });
}

        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });
  
  </script>
</body>
</html>